# 데이터베이스의 종류

## 관계형데이터베이스 (RDBMS)

- 행과 열을 가지는 표 형식 데이터를 저장하는 형태의 데이터베이스
- SQL을 써서 조작
- MySQL, PostgreSQL, 오라클, SQL Server, MSSQL 등이 있다
- 관계형 데이터베이스의 경우 표준 SQL은 지키기는 하지만, 각각의 제품에 특화시킨 SQL을 사용
- 예를 들어 오라클의 경우 PL/SQL이라고 하며 SQL Server에서는 T-SQL, MySQL은 SQL을 사용

### 장점

- 다양한 용도로 사용(범용성), 높은 성능
- 데이터 무결성 보장, 높은 신뢰성
- 명확한(=엄격한) 스키마 정의
- 정규화에 따른 갱신 비용 최소화
- 데이터 분류, 정렬, 탐색 속도가 빠름
- 관계를 통해 각 데이터를 중복없이 한 번만 저장

### 단점

- 대량의 데이터 입력 처리
- 컬럼 확장 어려움, 유연성 부족
- 데이터베이스 부하 분석이 어려움
- 수평 확장이 어려움, 데이터 베이스 저장 방식으로 인해 수직 확장만 지원

> **수직확장(Scale up)**
> 데이터베이스 서버의 성능을 향상시키는 것 ex) CPU 업그레이드

> **수평확장(Scale out)**
> 서버를 추가하여 데이터베이스를 분산시키는 것. 여러 호스트에서 하나의 데이터베이스가 작동

## NoSQL 데이베이스 ( Not only SQL)

- 키(Key) - 값(Value)의 형태로 저장되는 데이터베이스, 키를 사용해 데이터 관리 및 접근
- MongoDB, redis 등이 있다.
- 스키마 없음
- 관계 없음
- 조인이 존재하지 않고 데이터를 가져올 때, 컬렉션에 있느 데이터를 복제하여 필요한 데이터의 일부만 가져옴
- 정확한 데이터 요구 사항을 알 수 없거나 관계를 맺는 데이터가 자주 변경될 때 사용
- 읽기를 자주 하지만 데이터를 자주 변경하지 않는 경우 사용

### 장점

- 스키마가 없기 때문에 유연하며 자유로운 데이터 구조를 가질 수 있다
- 데이터 분산이 용이하며 성능 향상을 위한 Scalue-up 뿐만이 아닌 Scale-out 또한 가능

### 단점

- 데이터 중복이 발생할 수 있으며 중복된 데이터가 변경 될 경우 수정을 모든 컬렉션에서 수행을 해야 한다.
- 명확한 데이터 구조를 보장하지 않으며 데이터 구조 결정이 어렵다

## 💡 RDBMS 와 NoSQL의 차이점

- NoSQL은 비정형 데이터(메신저 텍스트, 음성, 이미지 등)를 다룰 수 있음
- NoSQL은 수평 확장이 가능하여 분산형 컴퓨터(클라우드)에 적합
- NoSQL은 중복을 허용하지만 RDBMS는 중복을 허용하지 않는다.

## MySQL

- 대부분의 운영체제와 호환되며 현재 가장 많이 사용하는 데이터베이스
- C, C++로 만듦
- MyISAM 인덱스 압축 기술, B-트리 기반의 인덱스, 스레드 기반의 메모리 할당 시스템, 매우 빠른 조인, 최대 64개의 인덱스를 제공
- 대용량 데이터베이스를 위해 설계되어 있고 롤백, 커밋, 이중 암호 지원 보안 등의 기능을 제공하며 많은 서비스에서 사용

![MySQL 스토리지 엔진 아키텍처](./image/MySQL%20%EC%8A%A4%ED%86%A0%EB%A6%AC%EC%A7%80%20%EC%97%94%EC%A7%84%20%EC%95%84%ED%82%A4%ED%85%8D%EC%B2%98.png)

### MySQL 스토리지 엔진

- 모듈식 아키텍처로 쉽게 스토리지 엔진을 바꿀 수 있다
- 데이터 웨어하주일, 트랜잭션 처리, 고가용성 처리에 강점을 두고 있다.
- 커넥터 API 및 서비스 계층을 통해 MySQL 데이터베이스와 쉽게 상호 작용할 수 있다.
- 쿼리 캐시 지원
  - 입력된 쿼리 문에 대한 전체 결과 집합을 저장, 사용자가 작성한 쿼리가 캐시에 있는 쿼리와 동일하면 서버는 단순히 구문 분석, 최적화 및 실행을 건너뛰고 캐시의 출력만 출력

## PostgreSQL

- VACUUM
  - 디스크 조각이 차지하는 영역을 회수할 수 있는 장치
- 최대 테이블의 크기는 32TB
- SQL뿐만 아니라 JSON을 이용해서 데이터에 접근할 수 있다.
- 지정 시간에 복구하는 기능, 로깅, 접근 제어, 중첩된 트랜잭션, 백업 등을 할 수 있다

## MongoDB

- JSON을 통해 데이터에 접근
- 확장성이 뛰어나며 빅데이터를 저장할 때 성능이 좋고 고가용성과 샤딩, 레플리카셋을 지원
- 스키마를 정해놓지 않고 데이터를 삽입할 수 있기 때문에 다양한 도메인의 데이터베이스를 기반으로 분석하거나 로깅 등을 구현할 때 강점을 보임
- 도큐먼트를 생성할 때마다 다른 컬렉션에서 중복된 값을 지니기 힘든 유니크한 값인 ObjectID가 생성됩니다

![MongoDB ObjectID](./image/MongoDB%20ObjectID.png)

MongoDB ObjectID

- 이는 기본키로 유닉스 시간 기반의 타임스탬프(4바이트), 랜덤 값(5바이트), 카운터(3바이트)로 이루어져 있습니다

## Redis

- 인메모리 데이터베이스이자 키-값 데이터 모델 기반의 데이터베이스
- 기본적인 데이터 타입은 stirng
- 최대 512MB까지 저장할 수 있다.
- 이외에도 set, hash 등을 지원한다.
- pub/sub 기능을 통해 채팅 시스템, 다른 데이터베이스 앞단에 두어 사용하는 캐싱 계층, 단순한 키-값이 필요한 세션 정보 관리, 정렬된 셋( sorted set ) 자료 구조를 이용한 실시간 순위표 서비스에 사용
